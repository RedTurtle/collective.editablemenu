!function(e,t,n){function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function r(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return g[e.which]?g[e.which]:v[e.which]?v[e.which]:String.fromCharCode(e.which).toLowerCase()}function i(e,t){return e.sort().join(",")===t.sort().join(",")}function o(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function l(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function s(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function u(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function c(){if(!m){m={};for(var e in g)e>95&&e<112||g.hasOwnProperty(e)&&(m[g[e]]=e)}return m}function p(e,t,n){return n||(n=c()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function d(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}function f(e,t){var n,a,r,i=[];for(n=d(e),r=0;r<n.length;++r)a=n[r],k[a]&&(a=k[a]),t&&"keypress"!=t&&y[a]&&(a=y[a],i.push("shift")),u(a)&&i.push(a);return t=p(a,i,t),{key:a,modifiers:i,action:t}}function b(e,n){return null!==e&&e!==t&&(e===n||b(e.parentNode,n))}function h(e){function n(e){e=e||{};var t,n=!1;for(t in k)e[t]?n=!0:k[t]=0;n||(_=!1)}function c(e,t,n,a,r,o){var l,s,c=[],p=n.type;if(!v._callbacks[e])return[];for("keyup"==p&&u(e)&&(t=[e]),l=0;l<v._callbacks[e].length;++l)if(s=v._callbacks[e][l],(a||!s.seq||k[s.seq]==s.level)&&p==s.action&&("keypress"==p&&!n.metaKey&&!n.ctrlKey||i(t,s.modifiers))){var d=!a&&s.combo==r,f=a&&s.seq==a&&s.level==o;(d||f)&&v._callbacks[e].splice(l,1),c.push(s)}return c}function p(e,t,n,a){v.stopCallback(t,t.target||t.srcElement,n,a)||!1===e(t,n)&&(l(t),s(t))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=r(e);t&&("keyup"!=e.type||w!==t?v.handleKey(t,o(e),e):w=!1)}function b(){clearTimeout(y),y=setTimeout(n,1e3)}function m(e,t,a,i){k[e]=0;for(var o=0;o<t.length;++o){var l=o+1===t.length?function(t){p(a,t,e),"keyup"!==i&&(w=r(t)),setTimeout(n,10)}:function(t){return function(){_=t,++k[e],b()}}(i||f(t[o+1]).action);g(t[o],l,i,e,o)}}function g(e,t,n,a,r){v._directMap[e+":"+n]=t;var i,o=(e=e.replace(/\s+/g," ")).split(" ");o.length>1?m(e,o,t,n):(i=f(e,n),v._callbacks[i.key]=v._callbacks[i.key]||[],c(i.key,i.modifiers,{type:i.action},a,e,r),v._callbacks[i.key][a?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:a,level:r,combo:e}))}var v=this;if(e=e||t,!(v instanceof h))return new h(e);v.target=e,v._callbacks={},v._directMap={};var y,k={},w=!1,O=!1,_=!1;v._handleKey=function(e,t,a){var r,i=c(e,t,a),o={},l=0,s=!1;for(r=0;r<i.length;++r)i[r].seq&&(l=Math.max(l,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=l)continue;s=!0,o[i[r].seq]=1,p(i[r].callback,a,i[r].combo,i[r].seq)}else s||p(i[r].callback,a,i[r].combo);var d="keypress"==a.type&&O;a.type!=_||u(e)||d||n(o),O=s&&"keydown"==a.type},v._bindMultiple=function(e,t,n){for(var a=0;a<e.length;++a)g(e[a],t,n)},a(e,"keypress",d),a(e,"keydown",d),a(e,"keyup",d)}if(e){for(var m,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},v={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},k={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},w=1;w<20;++w)g[111+w]="f"+w;for(w=0;w<=9;++w)g[w+96]=w.toString();h.prototype.bind=function(e,t,n){var a=this;return e=e instanceof Array?e:[e],a._bindMultiple.call(a,e,t,n),a},h.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},h.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},h.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},h.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!b(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},h.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},h.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(g[t]=e[t]);m=null},h.init=function(){var e=h(t);for(var n in e)"_"!==n.charAt(0)&&(h[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n))},h.init(),e.Mousetrap=h,"undefined"!=typeof module&&module.exports&&(module.exports=h),"function"==typeof define&&define.amd&&define("mousetrap",[],function(){return h})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),require(["jquery","mousetrap"],function(e,t){e(function(){var n={closed:"editablemenu.submenu.closed",loaded:"editablemenu.submenu.loaded",opened:"editablemenu.submenu.opened"};e(document).click(function(t){e(t.target).closest(".globalnavWrapper").length||(e(".globalnavWrapper #submenu-details").slideUp(),e(".tabOpen a").attr("aria-expanded",!1),e(".tabOpen").removeClass("tabOpen"))}),t.bind("esc",function(){e(".tabOpen").length>0&&(e(".tabOpen a").attr("aria-expanded",!1),e(".tabOpen a.menuTabLink").trigger(n.closed),e(".tabOpen").removeClass("tabOpen"),e(".globalnavWrapper #submenu-details").slideUp())}),e("a.menuTabLink").click(function(t){if(e(t.currentTarget).hasClass("clickandgo"))return!0;t.preventDefault();var a=e(this),r=a.data().tabid,i=a.parent(),o=e(".globalnavWrapper #submenu-details");if(void 0!==r){if(i.hasClass("tabOpen"))return e(".tabOpen a").attr("aria-expanded",!1),e(".tabOpen").removeClass("tabOpen"),void o.slideUp(400,function(){a.trigger(n.closed)});if(e(".tabOpen a").attr("aria-expanded",!1),e(".tabOpen").removeClass("tabOpen"),i.addClass("tabOpen"),i.find("a").attr("aria-expanded",!0),1!==o.length||parseInt(o.attr("class").slice(8),10)!==r){var l=e("body").data().baseUrl;e.get(l+"/@@submenu_detail_view?tab_id="+r,function(t){var l=/<script.*?id="protect-script".*?<\/script>/g,s=t.replace(l,""),u=e('<div id="submenu-details" class="submenu-'+r+'" style="display: none;"></div>').html(s);0!==e(u).children().length?0!==o.length?o.is(":visible")?(o.fadeOut("fast").remove(),i.append(u),e(".globalnavWrapper #submenu-details").fadeIn(400,function(){a.trigger(n.loaded)})):(o.remove(),i.append(u),e(".globalnavWrapper #submenu-details").slideDown(400,function(){a.trigger(n.loaded),a.trigger(n.opened)})):(i.append(u),e(".globalnavWrapper #submenu-details").slideDown(400,function(){a.trigger(n.loaded),a.trigger(n.opened)})):a.trigger(n.loaded)})}else o.slideDown(400,function(){a.trigger(n.opened)})}}),e("#portal-top").on("click",".submenuDetailsContent a",function(){e(this).focus()}),e(".globalnavWrapper").on("click","a.closeSubmenuLink",function(t){t.preventDefault();var a=e(this);e(".tabOpen a").attr("aria-expanded",!1),e(".tabOpen").removeClass("tabOpen"),e(".globalnavWrapper #submenu-details").slideUp(400,function(){a.trigger(n.closed)});var r=e(a.parents("#submenu-details"));if(0!==r.length){var i=r.attr("class").slice(8),o=e('*[data-tabid="'+i+'"]');1===o.length&&e(o).focus()}})})}),define("js/editablemenu.js",function(){});
//# sourceMappingURL=editablemenu.min.js.map