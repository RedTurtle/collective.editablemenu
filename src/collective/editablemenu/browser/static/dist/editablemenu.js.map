{
  "version": 3,
  "sources": [
    "js/editablemenu.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "editablemenu.js",
  "sourcesContent": [
    "require(['jquery'], function($) {\n  $(function() {\n    var customEvents = {\n      closed: 'editablemenu.submenu.closed',\n      loaded: 'editablemenu.submenu.loaded',\n      opened: 'editablemenu.submenu.opened',\n    };\n\n    $(document).click(function(event) {\n      if (!$(event.target).closest('.globalnavWrapper').length) {\n        $('.globalnavWrapper #submenu-details').slideUp();\n        $('.tabOpen').removeClass('tabOpen');\n      }\n    });\n\n    $('a.menuTabLink').click(function(e) {\n      if ($(e.currentTarget).hasClass('clickandgo')) {\n        return true;\n      }\n      e.preventDefault();\n      var $this = $(this);\n      var tabid = $this.data().tabid;\n      var container = $this.parent();\n      var submenu = $('.globalnavWrapper #submenu-details');\n      if (tabid === undefined) {\n        return;\n      }\n      if (container.hasClass('tabOpen')) {\n        //close the submenu\n        $('.tabOpen').removeClass('tabOpen');\n        submenu.slideUp(400, function() {\n          $this.trigger(customEvents.closed);\n        });\n        return;\n      }\n      //else, we need to open a menu\n      $('.tabOpen').removeClass('tabOpen');\n      container.addClass('tabOpen');\n      if (submenu.length === 1) {\n        var submenu_tabid = parseInt(submenu.attr('class').slice(8), 10);\n        if (submenu_tabid === tabid) {\n          //we reopen the already loaded submenu\n          submenu.slideDown(400, function() {\n            $this.trigger(customEvents.opened);\n          });\n          return;\n        }\n      }\n      var baseUrl = $('body').data().baseUrl;\n      $.get(baseUrl + '/@@submenu_detail_view?tab_id=' + tabid, function(data) {\n        var scriptRegex = /<script.*?id=\"protect-script\".*?<\\/script>/g;\n        var newData = data.replace(scriptRegex, '');\n        var result_html = $(\n          '<div id=\"submenu-details\" class=\"submenu-' +\n            tabid +\n            '\" style=\"display: none;\"></div>'\n        ).html(newData);\n        if ($(result_html).children().length === 0) {\n          //no results.\n          $this.trigger(customEvents.loaded);\n          return;\n        }\n        if (submenu.length !== 0) {\n          //we need to remove old submenu and replace with new\n          if (submenu.is(':visible')) {\n            submenu.fadeOut('fast').remove();\n            container.append(result_html);\n            $('.globalnavWrapper #submenu-details').fadeIn(400, function() {\n              $this.trigger(customEvents.loaded);\n            });\n          } else {\n            submenu.remove();\n            container.append(result_html);\n            $('.globalnavWrapper #submenu-details').slideDown(400, function() {\n              $this.trigger(customEvents.loaded);\n              $this.trigger(customEvents.opened);\n            });\n          }\n        } else {\n          container.append(result_html);\n          $('.globalnavWrapper #submenu-details').slideDown(400, function() {\n            $this.trigger(customEvents.loaded);\n            $this.trigger(customEvents.opened);\n          });\n        }\n      });\n    });\n    $('#portal-top').on('click', '.submenuDetailsContent a', function() {\n      $(this).focus();\n    });\n    $('.globalnavWrapper').on('click', 'a.closeSubmenuLink', function(e) {\n      e.preventDefault();\n      var $this = $(this);\n      $('.tabOpen').removeClass('tabOpen');\n      $('.globalnavWrapper #submenu-details').slideUp(400, function() {\n        $this.trigger(customEvents.closed);\n      });\n      var parent = $($this.parents('#submenu-details'));\n      if (parent.length === 0) {\n        return;\n      }\n      // the class starts with \"submenu-\"\n      var link_id = parent.attr('class').slice(8);\n      var focus_link = $('*[data-tabid=\"' + link_id + '\"]');\n      if (focus_link.length === 1) {\n        $(focus_link).focus();\n      }\n    });\n  });\n});\n\ndefine(\"js/editablemenu.js\", function(){});\n\n"
  ]
}