{
  "version": 3,
  "sources": [
    "js/editablemenu.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "editablemenu.js",
  "sourcesContent": [
    "require(['jquery'], function($) {\n  $(function() {\n    $(document).click(function(event) {\n      if (!$(event.target).closest('.globalnavWrapper').length) {\n        $('.globalnavWrapper #submenu-details').slideUp();\n        $('.tabOpen').removeClass('tabOpen');\n      }\n    });\n    //$('a.menuTabLink').blur(function(e) {\n    //  /*when a menutab link loses the focus, set the focus to the first\n    //  submenu link. Except if the event is a \"close menu\" event.\n    //  */\n    //  if ($(e.relatedTarget).attr('class') === 'closeSubmenuLink') {\n    //    $(this).focus();\n    //    return;\n    //  }\n    //  var tabid = $(this).data().tabid;\n    //  if (tabid !== undefined) {\n    //    var submenu_links = $('.globalnavWrapper .submenu-' + tabid + ' a');\n    //    if ((submenu_links.length !== 0) && ($('.globalnavWrapper #submenu-details').is(':visible'))) {\n    //      e.preventDefault();\n    //      //set the focus to first element in the submenu\n    //      $(submenu_links[0]).focus();\n    //      return;\n    //    }\n    //  }\n    //});\n    $('a.menuTabLink').click(function(e) {\n      if ($(e.currentTarget).hasClass('clickandgo')) {\n        return true;\n      }\n      e.preventDefault();\n      var $this = $(this);\n      var tabid = $this.data().tabid;\n      var container = $this.parent();\n      var submenu = $('.globalnavWrapper #submenu-details');\n      if (tabid === undefined) {\n        return;\n      }\n      if (container.hasClass('tabOpen')) {\n        //close the submenu\n        $('.tabOpen').removeClass('tabOpen');\n        submenu.slideUp();\n        return;\n      }\n      //else, we need to open a menu\n      $('.tabOpen').removeClass('tabOpen');\n      container.addClass('tabOpen');\n      if (submenu.length === 1) {\n        var submenu_tabid = parseInt(submenu.attr('class').slice(8), 10);\n        if (submenu_tabid === tabid) {\n          //we reopen the already loaded submenu\n          submenu.slideDown();\n          return;\n        }\n      }\n      var baseUrl = $('body').data().baseUrl;\n      if (!baseUrl) {\n        //plone4\n        baseUrl = portal_url;\n      }\n      // var baseUrl = portal_url ? portal_url : $('body').data().baseUrl;\n      $.get(baseUrl + '/@@submenu_detail_view?tab_id=' + tabid, function(data) {\n        var scriptRegex = /<script.*?id=\"protect-script\".*?<\\/script>/g;\n        var newData = data.replace(scriptRegex, '');\n        var result_html = $(\n          '<div id=\"submenu-details\" class=\"submenu-' +\n            tabid +\n            '\" style=\"display: none;\"></div>'\n        ).html(newData);\n        if ($(result_html).children().length === 0) {\n          //no results.\n          return;\n        }\n        if (submenu.length !== 0) {\n          //we need to remove old submenu and replace with new\n          if (submenu.is(':visible')) {\n            submenu.fadeOut('fast').remove();\n            //$('.globalnavWrapper').append(result_html);\n            container.append(result_html);\n            $('.globalnavWrapper #submenu-details').fadeIn();\n          } else {\n            submenu.remove();\n            //$('.globalnavWrapper').append(result_html);\n            container.append(result_html);\n            $('.globalnavWrapper #submenu-details').slideDown();\n          }\n        } else {\n          //$('.globalnavWrapper').append(result_html);\n          container.append(result_html);\n          $('.globalnavWrapper #submenu-details').slideDown();\n        }\n\n        // var submenu_links = $('.globalnavWrapper #submenu-details a');\n        // if (submenu_links.length !== 0) {\n        //   // set the focus to first element in the submenu\n        //   $(submenu_links[0]).focus();\n        // }\n      });\n    });\n    $('#portal-top').on('click', '.submenuDetailsContent a', function() {\n      $(this).focus();\n    });\n    $('.globalnavWrapper').on('click', 'a.closeSubmenuLink', function(e) {\n      e.preventDefault();\n      $('.tabOpen').each(function() {\n        $(this).removeClass('tabOpen');\n      });\n      $('.globalnavWrapper #submenu-details').slideUp();\n      var parent = $($(this).parents('#submenu-details'));\n      if (parent.length === 0) {\n        return;\n      }\n      // the class starts with \"submenu-\"\n      var link_id = parent.attr('class').slice(8);\n      var focus_link = $('*[data-tabid=\"' + link_id + '\"]');\n      if (focus_link.length === 1) {\n        $(focus_link).focus();\n      }\n    });\n  });\n});\n\ndefine(\"js/editablemenu.js\", function(){});\n\n"
  ]
}